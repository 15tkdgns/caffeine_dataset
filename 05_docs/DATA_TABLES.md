# ğŸ“Š íŒŒì´í”„ë¼ì¸ ë°ì´í„° í…Œì´ë¸” ëª…ì„¸ì„œ

## ëª©ì°¨
1. [ì›ë³¸ ë°ì´í„°](#1-ì›ë³¸-ë°ì´í„°)
2. [ì „ì²˜ë¦¬ ë°ì´í„°](#2-ì „ì²˜ë¦¬-ë°ì´í„°)
3. [ëª¨ë¸ ì…ë ¥ ë°ì´í„°](#3-ëª¨ë¸-ì…ë ¥-ë°ì´í„°)
4. [ê°œì¸ ì†Œë¹„ ë°ì´í„°](#4-ê°œì¸-ì†Œë¹„-ë°ì´í„°)
5. [ë©”íƒ€ë°ì´í„°](#5-ë©”íƒ€ë°ì´í„°)

---

## 1. ì›ë³¸ ë°ì´í„°

### 1.1 IBM ì‹ ìš©ì¹´ë“œ ê±°ë˜ ë°ì´í„°
**íŒŒì¼**: `02_data/00_raw/credit_card_transactions-ibm_v2.csv`

**ê·œëª¨**: 24,386,900ê±´

**ìŠ¤í‚¤ë§ˆ**:

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| User | int | ì‚¬ìš©ì ID | 0, 1, 2, ... |
| Card | int | ì¹´ë“œ ë²ˆí˜¸ | 0, 1, 2, ... |
| Year | int | ì—°ë„ | 2002, 2003, ... |
| Month | int | ì›” | 1-12 |
| Day | int | ì¼ | 1-31 |
| Time | string | ì‹œê°„ | "09:30", "14:45" |
| Amount | string | ê¸ˆì•¡ | "$123.45", "$56.78" |
| Use Chip | string | ì¹© ì‚¬ìš© ì—¬ë¶€ | "Chip Transaction", ... |
| Merchant Name | string | ê°€ë§¹ì ëª… | "Walmart", "Shell", ... |
| Merchant City | string | ë„ì‹œ | "New York", "Boston" |
| Merchant State | string | ì£¼ | "NY", "MA" |
| Zip | string | ìš°í¸ë²ˆí˜¸ | "10001", "02101" |
| **MCC** | **int** | **ì—…ì¢… ì½”ë“œ** | 5411 (ì‹ë£Œí’ˆ), 5541 (ì£¼ìœ ) |
| Errors? | string | ì˜¤ë¥˜ ì—¬ë¶€ | "", "Bad CVV" |
| Is Fraud? | string | ì‚¬ê¸° ì—¬ë¶€ | "No", "Yes" |

**ìš©ë„**: 
- ì‹œí€€ìŠ¤ ì˜ˆì¸¡ í•™ìŠµì˜ ì›ì²œ ë°ì´í„°
- MCC ì½”ë“œë¥¼ 6ê°œ ì¹´í…Œê³ ë¦¬ë¡œ ë§¤í•‘

**MCC â†’ ì¹´í…Œê³ ë¦¬ ë§¤í•‘**:
```
5411, 5499, 5462 â†’ ì‹ë£Œí’ˆ
5541, 5542       â†’ ì£¼ìœ 
4121, 4111, 4784 â†’ êµí†µ
5912, 5200, 5722 â†’ ìƒí™œ
5812, 5813, 5814 â†’ ì™¸ì‹
5311, 5651, 5942 â†’ ì‡¼í•‘
```

---

## 2. ì „ì²˜ë¦¬ ë°ì´í„°

### 2.1 ê¸°ë³¸ ì‹œí€€ìŠ¤ ë°ì´í„°
**íŒŒì¼**: `02_data/01_processed/preprocessed_sequence.csv`

**ê·œëª¨**: 18,140,056ê±´ (ìœ íš¨ ë°ì´í„°ë§Œ)

**ìŠ¤í‚¤ë§ˆ** (15ê°œ í”¼ì²˜):

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ìš©ë„ |
|--------|------|------|------|
| **Amount_scaled** | float | ì •ê·œí™”ëœ ê¸ˆì•¡ | ê¸ˆì•¡ íŒ¨í„´ |
| **Amount_log_scaled** | float | log(ê¸ˆì•¡) ì •ê·œí™” | ì´ìƒì¹˜ ì²˜ë¦¬ |
| **Amount_bin_scaled** | float | ê¸ˆì•¡ êµ¬ê°„ ì¸ì½”ë”© | ì €ê°€/ì¤‘ê°€/ê³ ê°€ êµ¬ë¶„ |
| **Hour_scaled** | float | ì‹œê°„(0-23) ì •ê·œí™” | ì‹œê°„ëŒ€ íŒ¨í„´ |
| **DayOfWeek_scaled** | float | ìš”ì¼(0-6) ì •ê·œí™” | ìš”ì¼ íŒ¨í„´ |
| **DayOfMonth_scaled** | float | ì¼(1-31) ì •ê·œí™” | ì›”ì´ˆ/ì›”ë§ íŒ¨í„´ |
| **IsWeekend_scaled** | float | ì£¼ë§ ì—¬ë¶€ (0/1) | ì£¼ë§ íŒ¨í„´ |
| **IsNight_scaled** | float | ì•¼ê°„ ì—¬ë¶€ (0/1) | ì•¼ê°„ ì†Œë¹„ |
| **IsBusinessHour_scaled** | float | ì—…ë¬´ì‹œê°„ ì—¬ë¶€ | 9-18ì‹œ |
| **User_AvgAmount_scaled** | float | ì‚¬ìš©ì í‰ê·  ê¸ˆì•¡ | ì‚¬ìš©ì í”„ë¡œíŒŒì¼ |
| **User_StdAmount_scaled** | float | ì‚¬ìš©ì ê¸ˆì•¡ í‘œì¤€í¸ì°¨ | ì§€ì¶œ ë³€ë™ì„± |
| **Time_Since_Last_scaled** | float | ì´ì „ ê±°ë˜ì™€ ì‹œê°„ ê°„ê²© (ì´ˆ) | êµ¬ë§¤ ì£¼ê¸° |
| **Transaction_Sequence_scaled** | float | ê±°ë˜ ìˆœì„œ | ê±°ë˜ íšŸìˆ˜ |
| **User_Category_Count_scaled** | float | í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ì´ìš© íšŸìˆ˜ | ì¹´í…Œê³ ë¦¬ ì„ í˜¸ë„ |
| **Current_Category_encoded_scaled** | float | **í˜„ì¬ ì¹´í…Œê³ ë¦¬** (0-5) | **í•µì‹¬ í”¼ì²˜** â­ |
| **Previous_Category_encoded_scaled** | float | ì´ì „ ì¹´í…Œê³ ë¦¬ (0-5, -1) | ì´ì „ êµ¬ë§¤ |
| **Next_Category_encoded** | int | **íƒ€ê²Ÿ: ë‹¤ìŒ ì¹´í…Œê³ ë¦¬** | **Y (ë¼ë²¨)** |
| Next_Category | string | ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ëª… | ê°€ë…ì„±ìš© |
| Current_Category | string | í˜„ì¬ ì¹´í…Œê³ ë¦¬ëª… | ê°€ë…ì„±ìš© |
| User | int | ì‚¬ìš©ì ID | ê·¸ë£¹í™”ìš© |

**ì¹´í…Œê³ ë¦¬ ì¸ì½”ë”©**:
```
0 = êµí†µ
1 = ìƒí™œ
2 = ì‡¼í•‘
3 = ì‹ë£Œí’ˆ
4 = ì™¸ì‹
5 = ì£¼ìœ 
```

---

### 2.2 ê°œì„ ëœ ì‹œí€€ìŠ¤ ë°ì´í„° (Refer í”¼ì²˜ ë°˜ì˜)
**íŒŒì¼**: `02_data/01_processed/preprocessed_enhanced.csv`

**ê·œëª¨**: 18,140,056ê±´

**ìŠ¤í‚¤ë§ˆ** (30+ê°œ í”¼ì²˜):

**ê¸°ì¡´ 15ê°œ + ì¶”ê°€ í”¼ì²˜**:

| ì¹´í…Œê³ ë¦¬ | í”¼ì²˜ëª… | ì„¤ëª… |
|---------|--------|------|
| **ì‹œê°„ ì„¸ë°€ (5ê°œ)** | IsLunchTime_scaled | ì ì‹¬ ì‹œê°„ (11-14ì‹œ) â­ Refer |
| | IsEvening_scaled | ì €ë… ì‹œê°„ (18-21ì‹œ) â­ Refer |
| | IsMorningRush_scaled | ì¶œê·¼ ì‹œê°„ (7-9ì‹œ) â­ Refer |
| | IsNight_scaled | ì•¼ê°„ (22ì‹œ-6ì‹œ) |
| | IsBusinessHour_scaled | ì—…ë¬´ ì‹œê°„ (9-18ì‹œ) |
| **ê¸ˆì•¡ (1ê°œ)** | AmountBin_encoded_scaled | ê¸ˆì•¡ 4ë‹¨ê³„ (ì €/ì¤‘/ê³ /ì´ˆê³ ) â­ Refer |
| **ì‚¬ìš©ì ì„ í˜¸ (1ê°œ)** | User_FavCategory_encoded_scaled | ì‚¬ìš©ì ì„ í˜¸ ì¹´í…Œê³ ë¦¬ â­ Refer |
| **ì¹´í…Œê³ ë¦¬ ë¹„ìœ¨ (6ê°œ)** | User_êµí†µ_Ratio_scaled | ì‚¬ìš©ìì˜ êµí†µ ì´ìš© ë¹„ìœ¨ â­ Refer |
| | User_ìƒí™œ_Ratio_scaled | ì‚¬ìš©ìì˜ ìƒí™œ ì´ìš© ë¹„ìœ¨ |
| | User_ì‡¼í•‘_Ratio_scaled | ì‚¬ìš©ìì˜ ì‡¼í•‘ ì´ìš© ë¹„ìœ¨ |
| | User_ì‹ë£Œí’ˆ_Ratio_scaled | ì‚¬ìš©ìì˜ ì‹ë£Œí’ˆ ì´ìš© ë¹„ìœ¨ |
| | User_ì™¸ì‹_Ratio_scaled | ì‚¬ìš©ìì˜ ì™¸ì‹ ì´ìš© ë¹„ìœ¨ |
| | User_ì£¼ìœ _Ratio_scaled | ì‚¬ìš©ìì˜ ì£¼ìœ  ì´ìš© ë¹„ìœ¨ |

**ì´ í”¼ì²˜**: ì•½ **28-30ê°œ** (ê¸°ì¡´ 15 + Refer 13-15ê°œ)

---

## 3. ëª¨ë¸ ì…ë ¥ ë°ì´í„°

### 3.1 í•™ìŠµ/í…ŒìŠ¤íŠ¸ ë¶„í• 
**ë°©ë²•**: Stratified 80:20

```python
X_train: (14,512,044, 15-30)  # 80%
X_test:  ( 3,628,012, 15-30)  # 20%
```

### 3.2 ì…ë ¥ í˜•ì‹
**X (íŠ¹ì„±)**:
- íƒ€ì…: `float32` (ë©”ëª¨ë¦¬ ì ˆì•½)
- Shape: `(N, num_features)`
- ë²”ìœ„: StandardScaler ì •ê·œí™” (í‰ê·  0, í‘œì¤€í¸ì°¨ 1)

**Y (íƒ€ê²Ÿ)**:
- íƒ€ì…: `int`
- ê°’: 0-5 (6ê°œ ì¹´í…Œê³ ë¦¬)
- ë¶ˆê· í˜•:
  ```
  ì‹ë£Œí’ˆ: 30.54%
  ì™¸ì‹:   17.93%
  ì‡¼í•‘:   16.63%
  ì£¼ìœ :   14.55%
  êµí†µ:   12.59%
  ìƒí™œ:    7.76%  â† ì†Œìˆ˜ í´ë˜ìŠ¤
  ```

---

## 4. ê°œì¸ ì†Œë¹„ ë°ì´í„°

### 4.1 ê°œì¸ ê±°ë˜ ë‚´ì—­ (ëŒ€ì‹œë³´ë“œìš©)
**íŒŒì¼**: `2024-12-03~2025-12-03.csv`

**ê·œëª¨**: 2,152ê±´

**ì¸ì½”ë”©**: EUC-KR (í•œê¸€)

**ìŠ¤í‚¤ë§ˆ**:

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| ë‚ ì§œ | string | YYYY-MM-DD | "2025-12-02" |
| ì‹œê°„ | string | HH:MM | "19:28" |
| íƒ€ì… | string | ê±°ë˜ ìœ í˜• | "ì§€ì¶œ", "ìˆ˜ì…" |
| **ëŒ€ë¶„ë¥˜** | **string** | **ì†Œë¹„ ì¹´í…Œê³ ë¦¬** | "ì‹ë¹„", "êµí†µ", "ìƒí™œ" |
| ì†Œë¶„ë¥˜ | string | ì„¸ë¶€ ë¶„ë¥˜ | "í¸ì˜ì ", "ì§€í•˜ì² " |
| ë‚´ìš© | string | ê±°ë˜ ë‚´ìš© | "GS25", "ìŠ¤íƒ€ë²…ìŠ¤" |
| **ê¸ˆì•¡** | **int** | **ê±°ë˜ ê¸ˆì•¡** | -8400, 500000 |
| í™”í | string | í†µí™” | "KRW" |
| ê²°ì œìˆ˜ë‹¨ | string | ê²°ì œ ë°©ë²• | "KBì¹´ë“œ", "ê³„ì¢Œì´ì²´" |
| ë©”ëª¨ | string | ë©”ëª¨ | null ë˜ëŠ” í…ìŠ¤íŠ¸ |

**ëŒ€ë¶„ë¥˜ (29ê°œ)**:
```
ì´ì²´, ì‹ë¹„, ìƒí™œ, ì˜¨ë¼ì¸ì‡¼í•‘, ë‚´ê³„ì¢Œì´ì²´, ê¸ˆìœµ, ìë™ì°¨, êµí†µ,
ì¹´í˜/ê°„ì‹, ë¬¸í™”/ì—¬ê°€, ì˜ë£Œ/ê±´ê°•, ì£¼ê±°/í†µì‹ , ë¯¸ë¶„ë¥˜, ì¹´ë“œëŒ€ê¸ˆ,
ì €ì¶•, ê¸ˆìœµìˆ˜ì…, íˆ¬ì, íŒ¨ì…˜/ì‡¼í•‘, ì—¬í–‰/ìˆ™ë°•, ë·°í‹°/ë¯¸ìš©, ê²½ì¡°/ì„ ë¬¼,
êµìœ¡/í•™ìŠµ, ìˆ /ìœ í¥, ìš©ëˆ, í˜„ê¸ˆ, ìë…€/ìœ¡ì•„, ê¸°íƒ€ìˆ˜ì…, ê¸‰ì—¬, ëŒ€ì¶œ
```

**ëŒ€ì‹œë³´ë“œ ë§¤í•‘** (29ê°œ â†’ 6ê°œ):
```python
'ì‹ë¹„' â†’ 'ì™¸ì‹'
'ì¹´í˜/ê°„ì‹' â†’ 'ì™¸ì‹'
'ì˜¨ë¼ì¸ì‡¼í•‘' â†’ 'ì‡¼í•‘'
'ìƒí™œ' â†’ 'ìƒí™œ'
'êµí†µ' â†’ 'êµí†µ'
'ìë™ì°¨' â†’ 'ì£¼ìœ '
...
```

---

## 5. ë©”íƒ€ë°ì´í„°

### 5.1 ì „ì²˜ë¦¬ ë©”íƒ€ì •ë³´
**íŒŒì¼**: `02_data/01_processed/preprocessing_metadata.txt` / `preprocessing_enhanced_metadata.txt`

**ë‚´ìš©**:
```
total_samples: 18142056
num_features: 15 (ë˜ëŠ” 28-30)
feature_names: ['Amount', 'Amount_log', ...]
categories: ['êµí†µ', 'ìƒí™œ', 'ì‡¼í•‘', 'ì‹ë£Œí’ˆ', 'ì™¸ì‹', 'ì£¼ìœ ']
processing_time: 0:11:41.701868
```

### 5.2 í”¼ì²˜ ì…€ë ‰ì…˜ ê²°ê³¼
**íŒŒì¼**: `02_data/01_processed/selected_features.json` / `selected_features_enhanced.json`

**ë‚´ìš©**:
```json
{
  "selected_features": ["Current_Category_encoded", "Amount", ...],
  "num_features": 15,
  "total_features": 28,
  "reduction": "46.4%",
  "performance": {
    "selected_accuracy": 0.4534,
    "selected_f1": 0.3908
  }
}
```

### 5.3 ëª¨ë¸ ë©”íƒ€ì •ë³´
**íŒŒì¼**: `03_models/06_sequence/metadata_xgboost_sequence_*.json`

**ë‚´ìš©**:
```json
{
  "model_name": "xgboost_sequence",
  "best_params": {
    "max_depth": 10,
    "learning_rate": 0.2,
    "n_estimators": 300
  },
  "test_accuracy": 0.4910,
  "test_f1": 0.4669,
  "training_time": 1430
}
```

---

## 6. ë°ì´í„° íë¦„ë„

```
ì›ë³¸ ë°ì´í„° (24Mê±´)
  â†“ [ì¹´í…Œê³ ë¦¬ ë§¤í•‘, í•„í„°ë§]
ìœ íš¨ ë°ì´í„° (18Mê±´)
  â†“ [ì‹œí€€ìŠ¤ í”¼ì²˜ ìƒì„±]
  â”œâ”€â†’ preprocessed_sequence.csv (15ê°œ í”¼ì²˜)
  â”‚     â†“ [í”¼ì²˜ ì…€ë ‰ì…˜]
  â”‚   selected (15ê°œ ìœ ì§€)
  â”‚
  â””â”€â†’ preprocessed_enhanced.csv (28-30ê°œ í”¼ì²˜)
        â†“ [í”¼ì²˜ ì…€ë ‰ì…˜]
      selected (15-18ê°œ ì„ íƒ)
        â†“
      ëª¨ë¸ í•™ìŠµ
        â†“
      best_model.joblib
```

---

## 7. ìš©ëŸ‰ ë° ë©”ëª¨ë¦¬

| íŒŒì¼ | ìš©ëŸ‰ | ë©”ëª¨ë¦¬(ë¡œë“œ ì‹œ) |
|------|------|----------------|
| credit_card_transactions-ibm_v2.csv | ~10GB | ~10GB |
| preprocessed_sequence.csv | 5.4GB | 5.4GB |
| preprocessed_enhanced.csv | ~7-8GB (ì˜ˆìƒ) | ~7-8GB |
| best_model.joblib | <1MB | ~100MB |
| 2024-12-03~2025-12-03.csv | <1MB | <10MB |

**ê¶Œì¥ ì‹œìŠ¤í…œ ì‚¬ì–‘**:
- RAM: 32GB+ (ì „ì²´ ë°ì´í„° ë¡œë“œ ì‹œ)
- GPU VRAM: 12GB+ (í•™ìŠµ ì‹œ)
- ë””ìŠ¤í¬: 30GB ì—¬ìœ  ê³µê°„

---

## 8. ë°ì´í„° í’ˆì§ˆ ì²´í¬

### 8.1 ê²°ì¸¡ì¹˜
```python
# ì›ë³¸ ë°ì´í„°
Amount: ë¬¸ìì—´ "$" í¬í•¨ â†’ float ë³€í™˜ í•„ìš”
Time: "HH:MM" í˜•ì‹ â†’ datetime íŒŒì‹±

# ì „ì²˜ë¦¬ í›„
ëª¨ë“  í”¼ì²˜: fillna(0) ì²˜ë¦¬ ì™„ë£Œ
```

### 8.2 ì´ìƒì¹˜
```python
Amount: 
  - ìŒìˆ˜ ì œê±° (í™˜ë¶ˆ ì œì™¸)
  - log ë³€í™˜ìœ¼ë¡œ ì´ìƒì¹˜ ì™„í™”

Time_Since_Last:
  - ì²« ê±°ë˜: fillna(0)
  - ìµœëŒ€ê°’ ì œí•œ ì—†ìŒ
```

### 8.3 ë¶ˆê· í˜•
```python
í´ë˜ìŠ¤ ë¶ˆê· í˜• ë¹„ìœ¨: 
  ìµœëŒ€(ì‹ë£Œí’ˆ) : ìµœì†Œ(ìƒí™œ) = 30.54% : 7.76% â‰ˆ 4:1

í•´ê²° ë°©ë²•:
  - sample_weight='balanced' ì ìš©
  - Macro F1 í‰ê°€ ì§€í‘œ ì‚¬ìš©
```

---

## 9. ì¶”ê°€ í…Œì´ë¸” (í•„ìš”ì‹œ ìƒì„±)

### 9.1 ì‚¬ìš©ì í”„ë¡œíŒŒì¼ í…Œì´ë¸” (ì¶”ì²œ)
**ëª©ì **: ì‚¬ìš©ìë³„ í†µê³„ ë¯¸ë¦¬ ê³„ì‚°í•˜ì—¬ ì†ë„ í–¥ìƒ

```sql
CREATE TABLE user_profiles (
    user_id INT PRIMARY KEY,
    avg_amount FLOAT,
    std_amount FLOAT,
    total_transactions INT,
    fav_category VARCHAR(10),
    category_ratio_êµí†µ FLOAT,
    category_ratio_ìƒí™œ FLOAT,
    category_ratio_ì‡¼í•‘ FLOAT,
    category_ratio_ì‹ë£Œí’ˆ FLOAT,
    category_ratio_ì™¸ì‹ FLOAT,
    category_ratio_ì£¼ìœ  FLOAT,
    last_updated TIMESTAMP
);
```

### 9.2 ì¹´í…Œê³ ë¦¬ í†µê³„ í…Œì´ë¸”
**ëª©ì **: ì¹´í…Œê³ ë¦¬ë³„ ì „í™˜ìœ¨ ë¶„ì„

```sql
CREATE TABLE category_transitions (
    from_category VARCHAR(10),
    to_category VARCHAR(10),
    transition_count INT,
    transition_prob FLOAT,
    avg_time_gap FLOAT,  -- í‰ê·  ì‹œê°„ ê°„ê²©
    PRIMARY KEY (from_category, to_category)
);
```

---

## 10. ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

| ì‘ì—… | ë°ì´í„° í¬ê¸° | ì‹œê°„ | ë¹„ê³  |
|------|-----------|------|------|
| ì›ë³¸ ë¡œë“œ | 24Mê±´ | ~30ì´ˆ | pandas read_csv |
| ì „ì²˜ë¦¬ (ê¸°ë³¸) | 24M â†’ 18M | ~12ë¶„ | CPU |
| ì „ì²˜ë¦¬ (ê°œì„ ) | 24M â†’ 18M | ~15ë¶„ | CPU, í”¼ì²˜ 30ê°œ |
| í”¼ì²˜ ì…€ë ‰ì…˜ | 200k ìƒ˜í”Œ | ~2ë¶„ | CPU |
| ëª¨ë¸ í•™ìŠµ (XGB GPU) | 14Mê±´ | ~25ë¶„ | RTX 4070 Ti |
| ëª¨ë¸ í•™ìŠµ (RF cuML) | 14Mê±´ | ~15ë¶„ | RTX 4070 Ti |
| ì˜ˆì¸¡ (ì¶”ë¡ ) | 100ë§Œê±´ | <10ì´ˆ | GPU |

---

**ì‘ì„±ì¼**: 2025-12-03  
**ë²„ì „**: 1.0  
**ì‘ì„±ì**: GPU ML Pipeline Project
