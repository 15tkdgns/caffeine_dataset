# GPU 환경 Requirements

## 핵심 패키지 (최소 설치)

# Deep Learning
tensorflow==2.20.0
keras==3.12.0

# Gradient Boosting
xgboost==3.1.2
lightgbm==4.6.0  # GPU 미지원 (CPU 버전)

# GPU ML 라이브러리
cuml-cu12==24.4.0
cudf-cu12==24.4.1

# 데이터 처리
pandas==2.2.1
numpy==1.26.4
scikit-learn==1.7.2

# CUDA Toolkit
cuda-python==12.9.4
nvidia-cudnn-cu12==9.16.0.29
nvidia-cublas-cu12==12.9.1.4
nvidia-cuda-runtime-cu12==12.9.79

## 설치 방법

### Option 1: 핵심 패키지만 설치 (권장)
```bash
# 새 환경 생성
conda create -n gpu_ml python=3.11 -y
conda activate gpu_ml

# 핵심 패키지 설치
pip install tensorflow[and-cuda]==2.20.0
pip install xgboost==3.1.2
pip install lightgbm==4.6.0
pip install cuml-cu12==24.4.0 --extra-index-url=https://pypi.nvidia.com
pip install pandas scikit-learn
```

### Option 2: 전체 환경 복제
```bash
# requirements_full.txt 파일 사용
pip install -r requirements_full.txt
```

## 시스템 요구사항

- **GPU**: NVIDIA GPU (CUDA Compute Capability 7.0+)
- **CUDA**: 12.6+
- **Driver**: NVIDIA Driver 560+
- **OS**: Linux (WSL2 지원)
- **Python**: 3.11

## 환경 변수 설정

실행 시 다음 환경 변수가 필요합니다:

```bash
# libstdc++ ABI 호환성
export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libstdc++.so.6

# NVIDIA 라이브러리 경로
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:\
$(find /path/to/python/site-packages/nvidia -name lib -type d | tr '\n' ':'):\
/path/to/python/site-packages/libcuml/lib64
```

**자동화**: `run_gpu.sh` 스크립트가 자동으로 설정합니다.

## 주요 버전 호환성

| 패키지 | 버전 | GPU 지원 | 비고 |
|--------|------|---------|------|
| tensorflow | 2.20.0 | CUDA 12.x | GPU 완전 지원 |
| xgboost | 3.1.2 | CUDA | device='cuda' |
| cuml-cu12 | 24.4.0 | CUDA | RandomForest, SVM 등 |
| lightgbm | 4.6.0 | ❌ | CPU 버전 (GPU는 OpenCL 필요) |

## 의존성 관리

**중요한 버전 제약**:
- `numpy < 2.3` (numba 호환성)
- `protobuf >= 6.0` (tensorflow 요구)
- `cuml-cu12 == 24.4.0` (24.10+는 일부 기능 미지원)

## 문제 해결

### ImportError: libcuml++.so
```bash
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/libcuml/lib64
```

### TensorFlow GPU 인식 실패
```bash
# NVIDIA 라이브러리 경로 추가
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/nvidia/*/lib
```

### ABI 버전 오류
```bash
export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libstdc++.so.6
```
